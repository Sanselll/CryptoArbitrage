================================================================================
TESTING MODEL INFERENCE ON TEST SET
================================================================================

ğŸ² Random seed: 42

1. Creating test environment...
   Pre-converting 22,726 opportunities to dict format...
   âœ“ Pre-conversion complete (22,726 records)
âœ… Test environment created
   Data: data/production/rl_opportunities.csv
   ğŸŒ FULL TEST MODE: Testing on ENTIRE test dataset
   Episode length: 2.9 days (2025-11-13 11:40:00.011682+00:00 to 2025-11-16 09:54:59.990073+00:00)
   Total steps: ~842 steps at 5-minute intervals
   Step interval: 5 minute(s) (0.0833 hours)
   Initial capital: $10,000.00
   Leverage: 2.0x
   Utilization: 80%
   Max Positions: 2
   Price History: data/production/symbol_data (dynamic funding updates enabled)

2. Creating network...
âœ… Network created (791,349 parameters)

3. Creating trainer...
âœ… Model compiled with torch.compile for faster training
âœ… Trainer created

4. Loading trained model...
âœ… Model loaded from checkpoints/v3-4/checkpoint_ep950.pt

5. Running inference on 1 episode...
   Episode 1: Reward=   6.02, P&L=$ 599.75 (6.00%), Trades= 4, Length=843 steps

âœ… Inference test complete!

================================================================================
DETAILED EVALUATION METRICS (TEST SET)
================================================================================

ğŸ“Š Episode Metrics:
  Mean Reward:         6.02 Â± 0.00
  Mean Length:        843.0 steps (5 min/step)

ğŸ’° P&L Metrics:
  Mean P&L (USD):  $  599.75
  Mean P&L (%):        6.00%
  Total P&L:       $  599.75

ğŸ“ˆ Trading Metrics:
  Total Trades:           4
  Winning Trades:         4
  Losing Trades:          0
  Win Rate:           100.0%
  Avg Duration:        35.0 hours

ğŸ¯ Opportunity Metrics:
  Opportunities/Ep:    7140
  Trades/Episode:       4.0
  Execution Rate:   0.1%

âš ï¸  Risk Metrics:
  Max Drawdown:        0.00%

ğŸ“Š Profitability Metrics:
  Profit Factor:   599753.30

âš™ï¸  Configuration Used:
  Leverage:        2.0x
  Utilization:     80%
  Max Positions:   2

ğŸ¯ Composite Score: 0.9168
   (P&L: 0.834 | ProfitFactor: 1.000 | Drawdown: 1.000)

ğŸ’¾ Trade Records:
   Total trades: 4
   Closed trades: 4
   Open positions: 0
   Saved to: trades_inference.csv

================================================================================
âœ… ALL INFERENCE TESTS PASSED
================================================================================
